kango.XHRRequest=function(){this.method="GET";this.url="";this.params={};this.headers={};this.async=!0;this.mimeType=this.password=this.username=this.contentType="";this.sanitizeData=!1};kango.XHRResult=function(){this.response="";this.status=0};kango.XHR=function(){};
kango.XHR.prototype={_paramsToString:function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(""!=b&&(b+="&"),b+=c+"="+a[c]);return b},getXMLHttpRequest:function(){return new XMLHttpRequest},send:function(a,b){var c=this.getXMLHttpRequest(),k=a.method||"GET",p="undefined"!=typeof a.async?a.async:!0,d=a.params||null,g=a.contentType||"text",e=a.url,q=a.username||null,r=a.password||null,f=a.headers||{},m=a.mimeType||null,s=a.sanitizeData||!1;kango.io.isLocalUrl(e)&&(e=kango.io.getExtensionFileUrl(e));
var n=function(a,c){var b={response:null,status:0,abort:function(){a.abort()}};if(2<=a.readyState&&(b.status=a.status,4==a.readyState)){if("xml"==c)b.response=a.responseXML;else if("json"==c)try{b.response=JSON.parse(a.responseText)}catch(d){}else b.response=a.responseText;b.abort=function(){}}s&&delete b.abort;return b},h=function(){return{response:null,status:0,abort:function(){}}};null!=d&&("object"==typeof a.params&&(d=this._paramsToString(d),"POST"==k&&(f["Content-Type"]="application/x-www-form-urlencoded")),
"GET"==k&&(e=e+"?"+d,d=null));try{c.open(k,e,p,q,r)}catch(t){return kango.func.isCallable(b)&&b(h()),h()}"undefined"!=typeof c.overrideMimeType&&(null!=m?c.overrideMimeType(m):"json"==g?c.overrideMimeType("application/json"):"text"==g&&c.overrideMimeType("text/plain"));c.onreadystatechange=function(){4==c.readyState&&kango.func.isCallable(b)&&b(n(c,g))};if("object"==typeof f)for(var l in f)f.hasOwnProperty(l)&&c.setRequestHeader(l,f[l]);try{c.send(d)}catch(u){return kango.func.isCallable(b)&&b(h()),
h()}return n(c,g)}};kango.registerModule(kango.getDefaultModuleRegistrar("xhr",kango.XHR));
